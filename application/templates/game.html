<!-- Main -->
<main class="poker-table">
    {% set buffer = game.get_buffer(request.player) %}
    <!-- Deck of cards -->
    <div class="deck">
        {% for player, cards in buffer.items() %}
            {% with player=player, cards=cards %}
                {% include 'card_templates/deck.html' %}
            {% endwith %}
        {% endfor %}
        {% include 'card_templates/deck_last_cards.html' %}
    </div>
    <!-- List of players -->
    <ul class="player-nav-list">
        <!-- List of card cells -->
        <ul class="placeholder-card-list">
            {% for place_id in [1, 2, 3, 4, 5, 6] %}
                <!-- Card cell -->
                <li id="{{ place_id }}" class="placeholder-card-field">
                    {% for card_place, cards in table.get_items() %}
                        {% if card_place == place_id %}
                            {% for num_value, card in [1, 2]|zip(cards) %}
                                {% if card %}
                                    <!-- Here may lay cards -->
                                    <div class="card {% if num_value == 1 %}attack_card{% else %}defend_card{% endif %}" style="color: {{ card.color }}">
                                        <div class="card-info card-info_top-pos">
                                            {{ card }}
                                        </div>
                                        <div class="card-layout"></div>
                                        <div class="card-info card-info_low-pos">
                                            {{ card }}
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </li>
            {% endfor %}
        </ul>
        {% for player in game.iter_players(request.player) %}
            <!-- Player -->
            <li class="player-item">
                <!-- Player icon -->
                <span class="player-icon"><img src='/static/game/images/avatar.png' alt="avatar"></span>
                <!-- Player info -->
                <div class="player-description">
                    <!-- Current player name -->
                    <strong class="player-name">
                        {% if player != request.player %}
                            {{ player }}
                        {% else %}
                            You
                        {% endif %}
                    </strong>
                    <!-- Current player cards -->
                    <div class="player-cards {% if request.player == player %} my-cards {% endif %}" id="{{ player }}">
                        {% if not buffer %}
                            {% for card in player.cards %}
                                <!-- Current player card -->
                                {% with player=player, card=card %}
                                    {% include 'card_templates/cards_in_use.html' %}
                                {% endwith %}
                            {% endfor %}
                        {% endif %}
                    </div>
                    {% if request.player == player %}
                        <button id="change_status_button" {% if not request.player.vars['role'] %} hidden {% endif %}>
                            Change Status
                        </button>
                    {% endif %}
                </div>
            </li>
        {% endfor %}
    </ul>
</main>
<!-- Footer -->
<footer class="footer">
    <input type="hidden" id="csrf_token" value="{{ csrf_token() }}" />
</footer>